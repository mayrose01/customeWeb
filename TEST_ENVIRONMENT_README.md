# ä¼ä¸šç®¡ç†ç³»ç»Ÿæµ‹è¯•ç¯å¢ƒ

## ğŸ¯ æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹äºå¼€å‘ç¯å¢ƒçš„å®Œæ•´æµ‹è¯•ç¯å¢ƒï¼Œç”¨äºè¿›è¡ŒåŠŸèƒ½æµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•ã€‚æµ‹è¯•ç¯å¢ƒä¸å¼€å‘ç¯å¢ƒå®Œå…¨éš”ç¦»ï¼Œä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®åº“ã€ç«¯å£å’Œæ–‡ä»¶å­˜å‚¨ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¯åŠ¨æµ‹è¯•ç¯å¢ƒ
```bash
./start_test_env.sh
```

### åœæ­¢æµ‹è¯•ç¯å¢ƒ
```bash
./stop_test_env.sh
```

### æ£€æŸ¥æµ‹è¯•ç¯å¢ƒçŠ¶æ€
```bash
./test_env_check.sh
```

## ğŸ“‹ è®¿é—®ä¿¡æ¯

| æœåŠ¡ | URL | ç«¯å£ | è¯´æ˜ |
|------|-----|------|------|
| å‰ç«¯åº”ç”¨ | http://localhost:3001 | 3001 | Vue.js å‰ç«¯åº”ç”¨ |
| åç«¯API | http://localhost:8001 | 8001 | FastAPI åç«¯æœåŠ¡ |
| Nginxä»£ç† | http://localhost:8080 | 8080 | åå‘ä»£ç†æœåŠ¡å™¨ |
| MySQLæ•°æ®åº“ | localhost:3307 | 3307 | æµ‹è¯•æ•°æ®åº“ |

## ğŸ—„ï¸ æ•°æ®åº“ä¿¡æ¯

- **æ•°æ®åº“å**: `enterprise_test_db`
- **ç”¨æˆ·å**: `test_user`
- **å¯†ç **: `test_password`
- **ç«¯å£**: `3307`

## ğŸ“ æ–‡ä»¶ç»“æ„

```
enterprise/
â”œâ”€â”€ docker-compose.test.yml          # æµ‹è¯•ç¯å¢ƒDockeré…ç½®
â”œâ”€â”€ start_test_env.sh               # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ stop_test_env.sh                # åœæ­¢è„šæœ¬
â”œâ”€â”€ test_env_check.sh               # çŠ¶æ€æ£€æŸ¥è„šæœ¬
â”œâ”€â”€ test_env_manual.md              # è¯¦ç»†ä½¿ç”¨æ‰‹å†Œ
â”œâ”€â”€ enterprise-backend/
â”‚   â”œâ”€â”€ test.env                    # æµ‹è¯•ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ uploads_test/               # æµ‹è¯•ç¯å¢ƒä¸Šä¼ ç›®å½•
â”‚   â””â”€â”€ logs/app_test.log           # æµ‹è¯•ç¯å¢ƒæ—¥å¿—
â””â”€â”€ nginx/
    â””â”€â”€ nginx.test.conf             # æµ‹è¯•ç¯å¢ƒNginxé…ç½®
```

## ğŸ”§ ç¯å¢ƒå·®å¼‚

| ç‰¹æ€§ | å¼€å‘ç¯å¢ƒ | æµ‹è¯•ç¯å¢ƒ |
|------|----------|----------|
| æ•°æ®åº“ | `enterprise` | `enterprise_test_db` |
| å‰ç«¯ç«¯å£ | `3000` | `3001` |
| åç«¯ç«¯å£ | `8000` | `8001` |
| MySQLç«¯å£ | `3306` | `3307` |
| ä¸Šä¼ ç›®å½• | `uploads` | `uploads_test` |
| æ—¥å¿—çº§åˆ« | `INFO` | `DEBUG` |
| æ—¥å¿—æ–‡ä»¶ | `app.log` | `app_test.log` |
| å®¹å™¨åç§° | `enterprise_*` | `enterprise_*_test` |

## ğŸ“Š ç®¡ç†å‘½ä»¤

### Docker Compose å‘½ä»¤
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.test.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.test.yml logs -f

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.test.yml restart

# åœæ­¢æœåŠ¡
docker-compose -f docker-compose.test.yml down

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose -f docker-compose.test.yml up --build -d
```

### æ•°æ®åº“ç®¡ç†
```bash
# è¿æ¥åˆ°æµ‹è¯•æ•°æ®åº“
mysql -h localhost -P 3307 -u test_user -p enterprise_test_db

# å¤‡ä»½æµ‹è¯•æ•°æ®åº“
docker exec enterprise_mysql_test mysqldump -u test_user -ptest_password enterprise_test_db > test_backup.sql

# æ¢å¤æµ‹è¯•æ•°æ®åº“
docker exec -i enterprise_mysql_test mysql -u test_user -ptest_password enterprise_test_db < test_backup.sql
```

## ğŸ§ª æµ‹è¯•å»ºè®®

### åŠŸèƒ½æµ‹è¯•
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†
- äº§å“ç®¡ç†ã€åˆ†ç±»ç®¡ç†
- æ–‡ä»¶ä¸Šä¼ ã€å›¾ç‰‡å¤„ç†
- é‚®ä»¶å‘é€åŠŸèƒ½

### é›†æˆæµ‹è¯•
- å‰åç«¯APIäº¤äº’
- æ•°æ®åº“æ“ä½œ
- æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½
- é‚®ä»¶å‘é€é›†æˆ

### æ€§èƒ½æµ‹è¯•
- å¹¶å‘ç”¨æˆ·è®¿é—®
- æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
- æ–‡ä»¶ä¸Šä¼ æ€§èƒ½
- APIå“åº”æ—¶é—´

### å®‰å…¨æµ‹è¯•
- ç”¨æˆ·è®¤è¯å’Œæˆæƒ
- SQLæ³¨å…¥é˜²æŠ¤
- XSSæ”»å‡»é˜²æŠ¤
- æ–‡ä»¶ä¸Šä¼ å®‰å…¨

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£å†²çª**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   lsof -i :3001
   lsof -i :8001
   lsof -i :3307
   ```

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥MySQLå®¹å™¨çŠ¶æ€
   docker ps | grep mysql_test
   
   # æŸ¥çœ‹MySQLæ—¥å¿—
   docker logs enterprise_mysql_test
   ```

3. **æœåŠ¡å¯åŠ¨å¤±è´¥**
   ```bash
   # æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
   docker-compose -f docker-compose.test.yml logs
   
   # é‡æ–°æ„å»ºé•œåƒ
   docker-compose -f docker-compose.test.yml build --no-cache
   ```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®éš”ç¦»**: æµ‹è¯•ç¯å¢ƒä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®åº“ï¼Œä¸ä¼šå½±å“å¼€å‘ç¯å¢ƒçš„æ•°æ®
2. **ç«¯å£éš”ç¦»**: ä½¿ç”¨ä¸åŒçš„ç«¯å£é¿å…ä¸å¼€å‘ç¯å¢ƒå†²çª
3. **æ–‡ä»¶éš”ç¦»**: ä¸Šä¼ æ–‡ä»¶å­˜å‚¨åœ¨ç‹¬ç«‹çš„ç›®å½•ä¸­
4. **æ—¥å¿—éš”ç¦»**: ä½¿ç”¨ç‹¬ç«‹çš„æ—¥å¿—æ–‡ä»¶ä¾¿äºè°ƒè¯•
5. **ç½‘ç»œéš”ç¦»**: ä½¿ç”¨ç‹¬ç«‹çš„Dockerç½‘ç»œ

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æµ‹è¯•ç¯å¢ƒä½¿ç”¨æ‰‹å†Œ](test_env_manual.md) - è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜
- [éƒ¨ç½²æŒ‡å—](DEPLOYMENT_GUIDE.md) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è¯´æ˜
- [å¼€å‘ç¯å¢ƒREADME](README.md) - å¼€å‘ç¯å¢ƒè¯´æ˜

## ğŸ†˜ æ”¯æŒ

å¦‚æœåœ¨ä½¿ç”¨æµ‹è¯•ç¯å¢ƒæ—¶é‡åˆ°é—®é¢˜ï¼š

1. è¿è¡Œ `./test_env_check.sh` æ£€æŸ¥ç¯å¢ƒçŠ¶æ€
2. æŸ¥çœ‹ç›¸å…³æ—¥å¿—æ–‡ä»¶
3. æ£€æŸ¥Dockerå®¹å™¨çŠ¶æ€
4. éªŒè¯ç½‘ç»œè¿æ¥
5. ç¡®è®¤é…ç½®æ–‡ä»¶æ­£ç¡®æ€§ 